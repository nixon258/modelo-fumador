import streamlit as st
from scripts.predict import predecirFuamdor

def main():
    st.title("游뛃 Predicci칩n de Fumador")
    st.write("Ingrese los datos cl칤nicos para evaluar la probabilidad de ser fumador.")

    st.subheader("Datos personales")
    age = st.number_input("Edad", min_value=10, max_value=100, value=40,
                          help="La edad influye porque a mayor edad puede aumentar el riesgo de enfermedades asociadas al fumar.")
    height = st.number_input("Altura (cm)", 100, 220, 175,
                             help="La altura permite calcular IMC y evaluar riesgo cardiovascular.")
    weight = st.number_input("Peso (kg)", 30, 200, 75,
                             help="El peso permite calcular IMC y correlacionarse con riesgos de salud de fumadores.")
    waist = st.number_input("Cintura (cm)", 40, 180, 85,
                            help="La circunferencia abdominal indica riesgo metab칩lico y cardiovascular, agravado por fumar.")

    st.subheader("Presi칩n arterial")
    systolic = st.number_input("Sist칩lica", 80, 200, 122,
                               help="La presi칩n sist칩lica elevada incrementa el riesgo cardiovascular, m치s a칰n en fumadores.")
    relaxation = st.number_input("Diast칩lica", 50, 150, 82,
                                 help="La presi칩n diast칩lica alta tambi칠n aumenta riesgo de complicaciones card칤acas.")

    st.subheader("An치lisis de sangre")
    fasting_bs = st.number_input("Glucosa en ayunas (mg/dL)", 50, 300, 97,
                                 help="La glucosa alta indica riesgo metab칩lico y diabetes, que se potencia con fumar.")
    cholesterol = st.number_input("Colesterol", 80, 400, 190,
                                  help="El colesterol alto aumenta riesgo de arteriosclerosis; fumar lo agrava.")
    triglyceride = st.number_input("Triglic칠ridos", 30, 500, 130,
                                   help="Triglic칠ridos altos incrementan riesgo cardiovascular y da침o arterial en fumadores.")
    hdl = st.number_input("HDL", 10, 120, 55,
                          help="El HDL 'bueno' protege; fumar reduce su efecto positivo.")
    ldl = st.number_input("LDL", 30, 300, 112,
                          help="El LDL 'malo' aumenta riesgo card칤aco; fumar potencia su efecto negativo.")
    hemoglobin = st.number_input("Hemoglobina", 5.0, 20.0, 14.7,
                                 help="La hemoglobina transporta ox칤geno; fumar reduce eficiencia respiratoria.")
    urine_protein = st.number_input("Prote칤na en orina", 0, 5, 1,
                                    help="Indica da침o renal; fumar aumenta riesgo de enfermedad renal cr칩nica.")

    serum_creatinine = st.number_input("Creatinina en suero", 0.1, 5.0, 1.1,
                                       help="Eval칰a funci칩n renal; fumar puede da침arla.")
    ast = st.number_input("AST", 5, 100, 24,
                          help="Enzima hep치tica; niveles altos indican da침o hep치tico que fumar puede agravar.")
    alt = st.number_input("ALT", 5, 100, 25,
                          help="Otra enzima hep치tica relacionada con la salud del h칤gado.")
    gtp = st.number_input("GTP", 5, 200, 27,
                          help="Indicador de funci칩n hep치tica, afectada por fumar.")

    genero = st.radio("G칠nero", ["Male", "Female"],
                      help="El g칠nero puede influir en patrones de fumar y susceptibilidad a enfermedades.")
    male = 1 if genero == "Male" else 0
    female = 1 if genero == "Female" else 0

    datos = {
        "age": age,
        "height(cm)": height,
        "weight(kg)": weight,
        "waist(cm)": waist,
        "systolic": systolic,
        "relaxation": relaxation,
        "fasting blood sugar": fasting_bs,
        "Cholesterol": cholesterol,
        "triglyceride": triglyceride,
        "HDL": hdl,
        "LDL": ldl,
        "hemoglobin": hemoglobin,
        "Urine protein": urine_protein,
        "serum creatinine": serum_creatinine,
        "AST": ast,
        "ALT": alt,
        "Gtp": gtp,
        "Male": male,
        "Female": female
    }

    if st.button("Predecir"):
        predictor = predecirFuamdor()
        resultado, prob = predictor.predecir(datos)
        st.success(f"Resultado: **{resultado}**")
        st.info(f"Probabilidad: **{prob:.2%}**")

if __name__ == "__main__":
    main()
